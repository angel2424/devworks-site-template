---
type Variant = 'default' | 'ghost' | 'icon'
type Mode = 'default' | 'dark'

interface Props {
  label?: string
  icon?: boolean
  dark?: boolean
  dense?: boolean
  href?: string
  className?: string
  target?: string
  variant?: Variant
}

const { label, icon, href, target, dark, className, variant, dense } = Astro.props

const variants: Record<Variant, string> = {
  default: 'bg-brand-600 shadow-sm hover:bg-brand-600/90 text-white text-sm gap-4',
  ghost: 'border border-brand-300 text-brand-600 bg-brand-50 text-sm hover:border-brand-500/90 ',
  icon: 'justify-center text-brand-700 border text-lg border-brand-700 hover:text-brand-600 hover:border-brand-600',
}

const darkVariants: Partial<Record<Variant, string>> = {
  default: 'bg-white! hover:bg-white/90! text-brand-500!',
  icon: 'text-brand-100! hover:text-brand-100/90! border-brand-100! hover:border-brand-100/90!',
}

const modeVariants: Record<Mode, Partial<Record<Variant, string>>> = {
  default: {},
  dark: darkVariants,
}

const effectiveVariant: Variant = variant ?? (icon ? 'icon' : 'default')
const mode: Mode = dark ? 'dark' : 'default'

const variantsClass = [variants[effectiveVariant], modeVariants[mode][effectiveVariant], className]
  .filter(Boolean)
  .join(' ')
---

<a
  {href}
  {target}
  class={`w-fit h-fit rounded-full transition-[background-color,color,border-color] ease-in-out duration-200 cursor-pointer flex items-center ${variantsClass} ${dense && !icon ? 'px-10 py-2 ' : dense && icon ? 'px-10 py-4 w-9! h-9! ' : !dense && icon ? 'h-12! w-12!' : 'px-10 py-3.5'}`}
>
  <slot name="icon" />
  <span>{label}</span>
  <slot name="icon-right" />
</a>
